"use strict";(self.webpackChunkmui_easy_cascader=self.webpackChunkmui_easy_cascader||[]).push([[646],{"./src/CascaderInput/index.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Defalut:()=>Defalut,__namedExportsOrder:()=>__namedExportsOrder,default:()=>index_stories});var Box=__webpack_require__("./node_modules/.pnpm/@mui+material@5.14.0_@emotion+react@11.11.1_@emotion+styled@11.11.0_@types+react@18.2.8_react-dom@18.2.0_react@18.2.0/node_modules/@mui/material/Box/Box.js"),Chip=__webpack_require__("./node_modules/.pnpm/@mui+material@5.14.0_@emotion+react@11.11.1_@emotion+styled@11.11.0_@types+react@18.2.8_react-dom@18.2.0_react@18.2.0/node_modules/@mui/material/Chip/Chip.js"),react=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),mock=__webpack_require__("./src/mock.ts"),TextField=__webpack_require__("./node_modules/.pnpm/@mui+material@5.14.0_@emotion+react@11.11.1_@emotion+styled@11.11.0_@types+react@18.2.8_react-dom@18.2.0_react@18.2.0/node_modules/@mui/material/TextField/TextField.js"),Cascader=__webpack_require__("./src/Cascader/index.tsx"),EasyPopper=__webpack_require__("./src/EasyPopper/index.tsx"),utils_getNodeLabel=__webpack_require__("./src/utils/getNodeLabel.ts"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function CascaderInput(props){const[isSearch,setIsSearch]=(0,react.useState)(!1),[search,setSearch]=(0,react.useState)(""),[focused,setFocused]=(0,react.useState)(!1),anchorRef=(0,react.useRef)(null),{value,onChange,getNodeLabel,nodes,renderNode:render,isEqual}=props,[selected,onSelect]=(0,react.useState)(value);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(TextField.Z,{focused,autoComplete:"off",label:"search",onFocus:()=>{setFocused(!0),setIsSearch(!0),onSelect(value)},ref:anchorRef,placeholder:isSearch?null===value?"":(0,utils_getNodeLabel.i)(value,getNodeLabel):"",value:isSearch?search:null===value?"":(0,utils_getNodeLabel.i)(value,getNodeLabel),onChange:e=>{setSearch(e.target.value)}}),(0,jsx_runtime.jsx)(EasyPopper.G,{anchorRef,open:focused,onClose:()=>{setFocused(!1),setIsSearch(!1),setSearch("")},children:(0,jsx_runtime.jsx)(Box.Z,{children:(0,jsx_runtime.jsx)(Cascader.v,{getNodeLabel,renderNode:render,nodes,isEqual,selected,onSelect:(nextSelect,isLeaf)=>{onSelect(nextSelect),isLeaf?(setFocused(!1),onChange(nextSelect),setIsSearch(!1),setSearch("")):onSelect(nextSelect)},search})})})]})}try{CascaderInput.displayName="CascaderInput",CascaderInput.__docgenInfo={description:"",displayName:"CascaderInput",props:{nodes:{defaultValue:null,description:"",name:"nodes",required:!0,type:{name:"CascaderNode<T>[]"}},renderNode:{defaultValue:null,description:"render function to customize the node\nLabel is Higlight component",name:"renderNode",required:!1,type:{name:"((Label: ReactNode, props: { value: T; depth: number; children?: CascaderNode<T>[]; }) => ReactNode)"}},isEqual:{defaultValue:null,description:"compare function to check if two values are equal",name:"isEqual",required:!1,type:{name:"((a: T, b: T) => boolean)"}},getNodeLabel:{defaultValue:null,description:"get the label of the node for hightlight and filter",name:"getNodeLabel",required:!1,type:{name:"((value: T) => string)"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"T | null"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: T | null) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/CascaderInput/index.tsx#CascaderInput"]={docgenInfo:CascaderInput.__docgenInfo,name:"CascaderInput",path:"src/CascaderInput/index.tsx#CascaderInput"})}catch(__react_docgen_typescript_loader_error){}const index_stories={title:"Input/CascaderInput",component:CascaderInput},Defalut=()=>{const[value,onChange]=(0,react.useState)({id:2,label:"children-1",age:10});return(0,jsx_runtime.jsx)(CascaderInput,{nodes:mock.$,isEqual:(a,b)=>a.id===b.id,getNodeLabel:node=>`${node.label}${node.age?"("+node.age+")":""}`,value,onChange,renderNode:(Label,{value})=>(0,jsx_runtime.jsxs)(Box.Z,{sx:{justifyContent:"center",display:"flex",gap:1},children:[Label,value.age&&(0,jsx_runtime.jsx)(Chip.Z,{variant:"outlined",size:"small",label:value.age,color:value.age>18?"success":"error"})]})})};Defalut.displayName="Defalut",Defalut.parameters={...Defalut.parameters,docs:{...Defalut.parameters?.docs,source:{originalSource:"() => {\n  const [value, onChange] = useState<MockObject | null>({\n    id: 2,\n    label: 'children-1',\n    age: 10\n  });\n  return <CascaderInput<MockObject> nodes={mockObjectNodes} isEqual={(a, b) => a.id === b.id} getNodeLabel={node => `${node.label}${node.age ? '(' + node.age + ')' : ''}`} value={value} onChange={onChange} renderNode={(Label, {\n    value\n  }) => <Box sx={{\n    justifyContent: 'center',\n    display: 'flex',\n    gap: 1\n  }}>\n          {Label}\n          {value.age && <Chip variant=\"outlined\" size=\"small\" label={value.age} color={value.age > 18 ? 'success' : 'error'} />}\n        </Box>} />;\n}",...Defalut.parameters?.docs?.source}}};const __namedExportsOrder=["Defalut"]},"./src/Cascader/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{v:()=>Cascader});var KeyboardArrowRight=__webpack_require__("./node_modules/.pnpm/@mui+icons-material@5.14.0_@mui+material@5.14.0_@types+react@18.2.8_react@18.2.0/node_modules/@mui/icons-material/esm/KeyboardArrowRight.js"),Paper=__webpack_require__("./node_modules/.pnpm/@mui+material@5.14.0_@emotion+react@11.11.1_@emotion+styled@11.11.0_@types+react@18.2.8_react-dom@18.2.0_react@18.2.0/node_modules/@mui/material/Paper/Paper.js"),MenuList=__webpack_require__("./node_modules/.pnpm/@mui+material@5.14.0_@emotion+react@11.11.1_@emotion+styled@11.11.0_@types+react@18.2.8_react-dom@18.2.0_react@18.2.0/node_modules/@mui/material/MenuList/MenuList.js"),MenuItem=__webpack_require__("./node_modules/.pnpm/@mui+material@5.14.0_@emotion+react@11.11.1_@emotion+styled@11.11.0_@types+react@18.2.8_react-dom@18.2.0_react@18.2.0/node_modules/@mui/material/MenuItem/MenuItem.js"),Box=__webpack_require__("./node_modules/.pnpm/@mui+material@5.14.0_@emotion+react@11.11.1_@emotion+styled@11.11.0_@types+react@18.2.8_react-dom@18.2.0_react@18.2.0/node_modules/@mui/material/Box/Box.js"),Typography=__webpack_require__("./node_modules/.pnpm/@mui+material@5.14.0_@emotion+react@11.11.1_@emotion+styled@11.11.0_@types+react@18.2.8_react-dom@18.2.0_react@18.2.0/node_modules/@mui/material/Typography/Typography.js"),ListItemText=__webpack_require__("./node_modules/.pnpm/@mui+material@5.14.0_@emotion+react@11.11.1_@emotion+styled@11.11.0_@types+react@18.2.8_react-dom@18.2.0_react@18.2.0/node_modules/@mui/material/ListItemText/ListItemText.js"),react=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),Highlight=__webpack_require__("./src/Highlight/index.tsx"),utils_getNodeLabel=__webpack_require__("./src/utils/getNodeLabel.ts");function flatNodes(nodes,pathLabel,getNodeLabel){return nodes.reduce(((acc,node)=>{const currentNodeLabel=(0,utils_getNodeLabel.i)(node.value,getNodeLabel),nextPathLabel=[...pathLabel,currentNodeLabel],{value}=node;return node.children?[...acc,{value,pathLabel:nextPathLabel,isLeaf:!1},...flatNodes(node.children,nextPathLabel,getNodeLabel)]:[...acc,{value,pathLabel:nextPathLabel,isLeaf:!0}]}),[])}var jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");function Cascader({onSelect:onChange,isEqual,nodes,selected:value,renderNode:render,search,getNodeLabel}){const path=(0,react.useMemo)((()=>getPath({nodes,selected:value,isEqual})),[nodes,value,isEqual]),[searchText,setSearchText]=(0,react.useState)(search);if((0,react.useEffect)((()=>{setSearchText(search)}),[search]),searchText){const listData=flatNodes(nodes,[],getNodeLabel);return(0,jsx_runtime.jsx)(Paper.Z,{children:(0,jsx_runtime.jsx)(MenuList.Z,{children:listData.filter((item=>item.isLeaf)).filter((item=>!!item.pathLabel.find((label=>label.includes(searchText))))).map(((item,index)=>(0,jsx_runtime.jsx)(MenuItem.Z,{onClick:()=>{onChange(item.value,item.isLeaf),setSearchText("")},children:(0,jsx_runtime.jsx)(Box.Z,{sx:{display:"flex",gap:1},children:item.pathLabel.map(((label,index)=>(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsx)(Highlight.y,{search,children:label}),index!==item.pathLabel.length-1&&(0,jsx_runtime.jsx)(Typography.Z,{component:"div",color:"text.disabled",children:"/"})]},index)))})},index)))})})}return(0,jsx_runtime.jsx)(Box.Z,{display:"flex",children:new Array(path.length+1).fill(null).map(((_,depth)=>(0,jsx_runtime.jsx)(Column,{depth,currentDepthNodes:0===depth?nodes:path[depth-1].children||[],path,onSelect:onChange,renderNode:render,getNodeLabel},depth)))})}function Column({currentDepthNodes,depth,path,onSelect,renderNode:render,getNodeLabel}){return(0,jsx_runtime.jsx)(Paper.Z,{children:currentDepthNodes.map(((node,index)=>{const selected=path[depth]===node;return(0,jsx_runtime.jsx)(MenuList.Z,{children:(0,jsx_runtime.jsxs)(MenuItem.Z,{selected,onClick:()=>{onSelect(node.value,!node.children)},children:[render?render?.((0,utils_getNodeLabel.i)(node.value,getNodeLabel),{depth,children:node.children,value:node.value}):(0,jsx_runtime.jsx)(ListItemText.Z,{children:(0,utils_getNodeLabel.i)(node.value,getNodeLabel)}),node.children&&(0,jsx_runtime.jsx)(KeyboardArrowRight.Z,{color:selected?"primary":"disabled"})]})},index)}))})}function getPath({nodes,selected,isEqual}){if(null===selected)return[];const res=[];return nodes.forEach((node=>{if(isEqual?isEqual(node.value,selected):node.value===selected)res.push(node);else if(node.children){const childPath=getPath({nodes:node.children,selected,isEqual});childPath.length>0&&res.push(node,...childPath)}})),res}Cascader.displayName="Cascader",Column.displayName="Column";try{Cascader.displayName="Cascader",Cascader.__docgenInfo={description:"",displayName:"Cascader",props:{nodes:{defaultValue:null,description:"",name:"nodes",required:!0,type:{name:"CascaderNode<T>[]"}},selected:{defaultValue:null,description:"",name:"selected",required:!0,type:{name:"T | null"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"(value: T | null, isLeaf: boolean) => void"}},search:{defaultValue:null,description:"filter / hightlight the nodes by search text",name:"search",required:!1,type:{name:"string"}},isEqual:{defaultValue:null,description:"compare function to check if two values are equal",name:"isEqual",required:!1,type:{name:"((a: T, b: T) => boolean)"}},renderNode:{defaultValue:null,description:"render function to customize the node\nLabel is Higlight component",name:"renderNode",required:!1,type:{name:"((Label: ReactNode, props: { value: T; depth: number; children?: CascaderNode<T>[]; }) => ReactNode)"}},getNodeLabel:{defaultValue:null,description:"get the label of the node for hightlight and filter",name:"getNodeLabel",required:!1,type:{name:"((value: T) => string)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Cascader/index.tsx#Cascader"]={docgenInfo:Cascader.__docgenInfo,name:"Cascader",path:"src/Cascader/index.tsx#Cascader"})}catch(__react_docgen_typescript_loader_error){}},"./src/EasyPopper/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{G:()=>EasyPopper});var _mui_material__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/@mui+material@5.14.0_@emotion+react@11.11.1_@emotion+styled@11.11.0_@types+react@18.2.8_react-dom@18.2.0_react@18.2.0/node_modules/@mui/material/Popper/Popper.js"),_mui_material__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/.pnpm/@mui+material@5.14.0_@emotion+react@11.11.1_@emotion+styled@11.11.0_@types+react@18.2.8_react-dom@18.2.0_react@18.2.0/node_modules/@mui/material/Grow/Grow.js"),_mui_material__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/.pnpm/@mui+material@5.14.0_@emotion+react@11.11.1_@emotion+styled@11.11.0_@types+react@18.2.8_react-dom@18.2.0_react@18.2.0/node_modules/@mui/material/Box/Box.js"),_mui_material__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/.pnpm/@mui+base@5.0.0-beta.7_@types+react@18.2.8_react-dom@18.2.0_react@18.2.0/node_modules/@mui/base/ClickAwayListener/ClickAwayListener.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=(__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js"));function EasyPopper({children,anchorRef,onClose,open}){const handleClose=event=>{anchorRef.current&&anchorRef.current.contains(event.target)||onClose()};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_2__.Z,{sx:{zIndex:1e3},open,anchorEl:anchorRef.current,transition:!0,disablePortal:!0,placement:"bottom-start",children:({TransitionProps,placement})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_3__.Z,{...TransitionProps,style:{transformOrigin:"bottom-start"===placement?"left top":"left bottom"},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_4__.Z,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_5__.Z,{onClickAway:handleClose,children})})})})}EasyPopper.displayName="EasyPopper";try{EasyPopper.displayName="EasyPopper",EasyPopper.__docgenInfo={description:"",displayName:"EasyPopper",props:{anchorRef:{defaultValue:null,description:"",name:"anchorRef",required:!0,type:{name:"RefObject<HTMLButtonElement>"}},open:{defaultValue:null,description:"",name:"open",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/EasyPopper/index.tsx#EasyPopper"]={docgenInfo:EasyPopper.__docgenInfo,name:"EasyPopper",path:"src/EasyPopper/index.tsx#EasyPopper"})}catch(__react_docgen_typescript_loader_error){}},"./src/Highlight/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{y:()=>Highlight});var _mui_material__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/@mui+material@5.14.0_@emotion+react@11.11.1_@emotion+styled@11.11.0_@types+react@18.2.8_react-dom@18.2.0_react@18.2.0/node_modules/@mui/material/styles/styled.js"),_mui_material__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/.pnpm/@mui+material@5.14.0_@emotion+react@11.11.1_@emotion+styled@11.11.0_@types+react@18.2.8_react-dom@18.2.0_react@18.2.0/node_modules/@mui/material/Box/Box.js"),rxjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/operators/map.js"),rxjs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/operators/skipWhile.js"),rxjs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/operators/debounceTime.js"),rxjs_hooks__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/rxjs-hooks@0.8.0-alpha.0_react@18.2.0_rxjs@7.8.1/node_modules/rxjs-hooks/dist/esm/use-observable.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js");const StyledMark=(0,_mui_material__WEBPACK_IMPORTED_MODULE_1__.ZP)("mark")((({focused})=>({backgroundColor:"#fde79b",...focused&&{color:"#FAAD14"}})));function Highlight(props){const{search:searchProp,focused,children}=props,search=(0,rxjs_hooks__WEBPACK_IMPORTED_MODULE_2__.m)(((_,inputs$)=>inputs$.pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_3__.U)((([search])=>search||void 0)),(0,rxjs__WEBPACK_IMPORTED_MODULE_4__.n)((search=>void 0===search)),(0,rxjs__WEBPACK_IMPORTED_MODULE_5__.b)(300))),void 0,[searchProp]),stringArray=children.split(new RegExp(`(${search})`,"g"));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_6__.Z,{children:stringArray.map(((string,index)=>string===search?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(StyledMark,{focused,children:string},index):string))})}Highlight.displayName="Highlight";try{Highlight.displayName="Highlight",Highlight.__docgenInfo={description:"",displayName:"Highlight",props:{search:{defaultValue:null,description:"",name:"search",required:!0,type:{name:"string | undefined"}},focused:{defaultValue:null,description:"",name:"focused",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Highlight/index.tsx#Highlight"]={docgenInfo:Highlight.__docgenInfo,name:"Highlight",path:"src/Highlight/index.tsx#Highlight"})}catch(__react_docgen_typescript_loader_error){}},"./src/mock.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$:()=>mockObjectNodes});const mockObjectNodes=[{value:{id:0,label:"parent-0",age:100},children:[{value:{id:1,label:"children-0"}},{value:{id:2,label:"children-1",age:10}}]},{value:{id:3,label:"parent-1"}}]},"./src/utils/getNodeLabel.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function getLabel(value,getNodeLabel){return getNodeLabel?getNodeLabel(value):"object"!=typeof value&&"function"!=typeof value?String(value):value?.label||""}__webpack_require__.d(__webpack_exports__,{i:()=>getLabel})}}]);